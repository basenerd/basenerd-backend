<!doctype html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0W1974C28Z"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-0W1974C28Z');
    </script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ title or "Basenerd" }}</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;600&family=IBM+Plex+Mono:wght@500&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='basenerd-logo-official.png') }}">

    <!-- Mobile nav + Opening Day countdown styles (one-time, global) -->
    <style>
      /* ----------------------------- */
      /* MOBILE SIDENAV (OFF-CANVAS)   */
      /* ----------------------------- */
      .mobile-nav-toggle,
      .mobile-nav-overlay { display:none; }

      @media (max-width: 900px) {
        .mobile-nav-toggle{
          display:block;
          position:fixed;
          top:12px;
          left:12px;
          z-index:10001;
          padding:10px 12px;
          border-radius:12px;
          border:1px solid rgba(255,255,255,.15);
          background:rgba(0,0,0,.55);
          backdrop-filter: blur(8px);
          color:#fff;
          font-weight:800;
          letter-spacing:.2px;
        }

        .mobile-nav-overlay{
          display:none;
          position:fixed;
          inset:0;
          background:rgba(0,0,0,.55);
          z-index:10000;
        }
        .mobile-nav-overlay.open{ display:block; }

        /* Your sidebar is .sidebar */
        .sidebar{
          position:fixed !important;
          top:0;
          left:-280px;              /* hidden by default */
          height:100vh;
          width:280px;
          max-width:85vw;
          overflow-y:auto;
          z-index:10002;
          transition:left .2s ease;
        }
        .sidebar.open{ left:0; }

        /* prevent desktop sidebar layout rules from squeezing content */
        .main, .container, .main-inner{
          margin-left:0 !important;
          width:100% !important;
        }

        /* breathing room for fixed menu button */
        body{ padding-top:56px; }
      }

      /* ----------------------------- */
      /* OPENING DAY COUNTDOWN (HOME)  */
      /* ----------------------------- */
      .opening-day-countdown{
        margin: 10px auto 10px auto;
        max-width: 980px;
        padding: 10px 14px;
        border-radius: 14px;
        background: rgba(255,255,255,.06);
        border: 1px solid rgba(255,255,255,.10);
        text-align:center;
      }
      .opening-day-countdown .odc-label{
        font-weight: 900;
        letter-spacing:.2px;
        opacity:.95;
      }
      .opening-day-countdown .odc-time{
        margin-top: 6px;
        display:flex;
        gap:14px;
        justify-content:center;
        flex-wrap:wrap;
        font-size: 14px;
      }
      .opening-day-countdown .odc-time b{
        font-size: 18px;
      }
      .opening-day-countdown .odc-sub{
        margin-top: 6px;
        opacity: .8;
        font-size: 12px;
      }
    </style>
  </head>

  <body>
    <!-- Mobile nav button + overlay (global, one-time) -->
    <button id="mobileNavToggle" class="mobile-nav-toggle" type="button" aria-label="Open menu">☰ Menu</button>
    <div id="mobileNavOverlay" class="mobile-nav-overlay"></div>

    <div class="layout">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-inner">
          <a class="brand" href="/">
            <span class="brand-dot"></span>
            <span>basenerd</span>
          </a>

          <nav class="side-nav">
            <a href="/" class="{% if request.path == '/' %}active{% endif %}">
              Home
            </a>
            <a href="/standings" class="{% if request.path.startswith('/standings') %}active{% endif %}">
              Standings
            </a>
            <a href="/players" class="{% if request.path.startswith('/players') or request.path.startswith('/player/') %}active{% endif %}">
              Players
            </a>
            <a href="/stats" class="{% if request.path.startswith('/stats') %}active{% endif %}">
              Stats
            </a>
            <a href="/teams" class="{% if request.path.startswith('/teams') or request.path.startswith('/team/') %}active{% endif %}">
              Teams
            </a>
            <a href="/games" class="{% if request.path.startswith('/games') or request.path.startswith('/game/') %}active{% endif %}">
              Games
            </a>
            <a href="/articles" class="{% if request.path.startswith('/articles') or request.path.startswith('/article/') %}active{% endif %}">
              Articles
            </a>
            <a class="dropdown-item" href="/random-player">Random Player Generator</a>
            <a href="/about" class="{% if request.path.startswith('/about') %}active{% endif %}">
              About
            </a>
          </nav>

          <div class="sidebar-footer">
            <span class="muted">Basenerd • v0.1</span>
          </div>
        </div>
      </aside>

      <!-- Main -->
      <main class="main">
        <div class="main-inner">
          <!-- Global site banner -->
          <div class="site-banner-wrap">
            <img src="{{ url_for('static', filename='basenerd-banner (2).png') }}" 
              alt="Basenerd Banner"
             class="site-banner">
          </div>

          <!-- Opening Day countdown (HOME ONLY) -->
          {% if request.path == "/" %}
            <div id="openingDayCountdown" class="opening-day-countdown">
              <div class="odc-label">Countdown to Opening Day</div>
              <div class="odc-time">
                <span><b id="odcDays">--</b> days</span>
                <span><b id="odcHours">--</b> hours</span>
                <span><b id="odcMins">--</b> min</span>
                <span><b id="odcSecs">--</b> sec</span>
              </div>
              <div class="odc-sub">First pitch: March 25, 8:05 PM ET</div>
            </div>
          {% endif %}

          <div class="container">
            {% block content %}{% endblock %}

            <footer class="footer">
              <span class="muted">© 2026 Basenerd</span>
            </footer>
          </div>
        </div>
      </main>
    </div>

    <!-- Mobile nav + countdown scripts (one-time, global) -->
    <script>
      // Mobile sidebar toggle
      (function () {
        const nav = document.querySelector(".sidebar");
        const btn = document.getElementById("mobileNavToggle");
        const overlay = document.getElementById("mobileNavOverlay");
        if (!nav || !btn || !overlay) return;

        function openNav(){
          nav.classList.add("open");
          overlay.classList.add("open");
          document.body.style.overflow = "hidden";
        }
        function closeNav(){
          nav.classList.remove("open");
          overlay.classList.remove("open");
          document.body.style.overflow = "";
        }

        btn.addEventListener("click", () => {
          nav.classList.contains("open") ? closeNav() : openNav();
        });
        overlay.addEventListener("click", closeNav);

        nav.addEventListener("click", (e) => {
          const a = e.target.closest("a");
          if (a && window.matchMedia("(max-width: 900px)").matches) closeNav();
        });
      })();

      // Opening Day countdown (home only)
      (function () {
        const root = document.getElementById("openingDayCountdown");
        if (!root) return;

        // March 25, 8:05 PM ET. Late March is typically DST in ET (-04:00).
        const target = new Date("2026-03-25T20:05:00-04:00");

        const dEl = document.getElementById("odcDays");
        const hEl = document.getElementById("odcHours");
        const mEl = document.getElementById("odcMins");
        const sEl = document.getElementById("odcSecs");

        function tick(){
          const now = new Date();
          let ms = target - now;

          if (ms <= 0) {
            dEl.textContent = "0";
            hEl.textContent = "0";
            mEl.textContent = "0";
            sEl.textContent = "0";
            return;
          }

          const totalSec = Math.floor(ms / 1000);
          const days = Math.floor(totalSec / 86400);
          const hours = Math.floor((totalSec % 86400) / 3600);
          const mins = Math.floor((totalSec % 3600) / 60);
          const secs = totalSec % 60;

          dEl.textContent = days;
          hEl.textContent = hours;
          mEl.textContent = mins;
          sEl.textContent = secs;
        }

        tick();
        setInterval(tick, 1000);
      })();
    </script>
  </body>
</html>
