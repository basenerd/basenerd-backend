<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MLB Standings ‚Ä¢ Basenerd</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;600&family=IBM+Plex+Mono:wght@500&display=swap" rel="stylesheet">
<style>
/* same CSS as before ‚Äî omitted here for brevity */
</style>
</head>
<body>
<header>
  <button class="hamburger" aria-label="Open menu" aria-expanded="false" aria-controls="site-drawer">
    <span></span><span></span><span></span>
  </button>
  <img src="{{ url_for('static', filename='basenerd-logo-official.png') }}" alt="Basenerd" />
  <h1>MLB Standings {{ season or '' }}</h1>
</header>

<aside id="site-drawer" class="drawer" aria-hidden="true">
  <nav class="drawer-nav">
    <a href="/">Home</a>
    <a href="/todaysgames">Today's Games</a>
    <a href="/players">Players</a>
    <a href="/teams">Teams</a>
    <a href="/standings">Standings</a>
    <a href="/statistics">Statistics</a>
    <a href="/aboutbasenerd">About basenerd</a>
  </nav>
</aside>
<div class="drawer-backdrop" data-close-drawer></div>

<div class="wrap">
  <div class="meta">
    <span>Source: MLB Stats API</span>
    <span id="updated"></span>
  </div>

  <div class="view-toggle">
    <div class="seg" role="tablist" aria-label="Standings view">
      <button id="btnDiv" class="active" role="tab" aria-selected="true" aria-controls="view-division">Division</button>
      <button id="btnWC" role="tab" aria-selected="false" aria-controls="view-wc">Wild Card</button>
    </div>
  </div>

  {% if error %}
    <div class="error-banner">Live data error: {{ error }}</div>
  {% endif %}

  <!-- DIVISION VIEW -->
  <div id="view-division">
    <!-- Division tables exactly as before -->
  </div>

  <!-- WILD CARD VIEW -->
  <div id="view-wc" style="display:none">
    <div class="columns">
      <!-- NL Wild Card -->
      <section>
        <h3 class="column-title">National League</h3>

        {% for block in (data_wc.get("National League", [])) %}
          <!-- Leaders mini card -->
          <div class="leaders-card">
            <div class="leaders-title">Division Leaders</div>
            <div class="leaders-list">
              {% for row in block.get("rows", []) if row.get('isLeader') %}
                <div class="leader-pill" title="{{ row.get('team_name','Team') }}">
                  <span class="tag">{{ row.get('badge') }}</span>
                  {% if row.get("team_id") %}
                    <img src="https://www.mlbstatic.com/team-logos/{{ row.get('team_id') }}.svg" alt="" onerror="this.style.display='none'">
                  {% endif %}
                  <span class="abbr">{{ row.get("team_abbr","TBD") }}</span>
                  <span class="muted">{{ row.get("w","") }}-{{ row.get("l","") }}</span>
                </div>
              {% endfor %}
            </div>
          </div>

          <!-- Contenders table with badge column -->
          <div class="division">
            <h2>{{ block.get("division","Wild Card") }} (NL)</h2>
            <table>
              <thead>
                <tr>
                  <th class="wc-col"></th>
                  <th>Team</th>
                  <th class="num">W</th>
                  <th class="num">L</th>
                  <th class="num">Pct</th>
                  <th class="num">GB</th>
                  <th class="num">Streak</th>
                  <th class="num">Last 10</th>
                  <th class="num">Run Diff</th>
                </tr>
              </thead>
              <tbody>
                {% for row in block.get("rows", []) if not row.get('isLeader') %}
                  <tr>
                    <td class="wc-col">
                      {% if row.get('badge','').startswith('WC') %}
                        <span class="wc-badge">{{ row.get('badge') }}</span>
                      {% endif %}
                    </td>
                    <td class="team" title="{{ row.get('team_name','Team') }}">
                      {% if row.get("team_id") %}
                        <img src="https://www.mlbstatic.com/team-logos/{{ row.get('team_id') }}.svg" alt="{{ row.get('team_name','Team') }} logo" onerror="this.style.display='none'">
                      {% endif %}
                      {{ row.get("team_abbr","TBD") }}
                    </td>
                    <td class="num">{{ row.get("w","") }}</td>
                    <td class="num">{{ row.get("l","") }}</td>
                    <td class="num">{{ '%.3f'|format(row.get("pct",0.0)) }}</td>
                    <td class="num">{{ row.get("gb") if row.get("gb") not in [None, '', '0', '0.0', 0, '-', '‚Äî'] else '‚Äî' }}</td>
                    <td class="num streak-cell">{{ row.get("streak","") }}</td>
                    <td class="num">{{ row.get("last10","") }}</td>
                    <td class="num">{{ row.get("runDiff","") }}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        {% endfor %}
      </section>

      <!-- AL Wild Card -->
      <section>
        <h3 class="column-title">American League</h3>

        {% for block in (data_wc.get("American League", [])) %}
          <!-- Leaders mini card -->
          <div class="leaders-card">
            <div class="leaders-title">Division Leaders</div>
            <div class="leaders-list">
              {% for row in block.get("rows", []) if row.get('isLeader') %}
                <div class="leader-pill" title="{{ row.get('team_name','Team') }}">
                  <span class="tag">{{ row.get('badge') }}</span>
                  {% if row.get("team_id") %}
                    <img src="https://www.mlbstatic.com/team-logos/{{ row.get('team_id') }}.svg" alt="" onerror="this.style.display='none'">
                  {% endif %}
                  <span class="abbr">{{ row.get("team_abbr","TBD") }}</span>
                  <span class="muted">{{ row.get("w","") }}-{{ row.get("l","") }}</span>
                </div>
              {% endfor %}
            </div>
          </div>

          <!-- Contenders table with badge column -->
          <div class="division">
            <h2>{{ block.get("division","Wild Card") }} (AL)</h2>
            <table>
              <thead>
                <tr>
                  <th class="wc-col"></th>
                  <th>Team</th>
                  <th class="num">W</th>
                  <th class="num">L</th>
                  <th class="num">Pct</th>
                  <th class="num">GB</th>
                  <th class="num">Streak</th>
                  <th class="num">Last 10</th>
                  <th class="num">Run Diff</th>
                </tr>
              </thead>
              <tbody>
                {% for row in block.get("rows", []) if not row.get('isLeader') %}
                  <tr>
                    <td class="wc-col">
                      {% if row.get('badge','').startswith('WC') %}
                        <span class="wc-badge">{{ row.get('badge') }}</span>
                      {% endif %}
                    </td>
                    <td class="team" title="{{ row.get('team_name','Team') }}">
                      {% if row.get("team_id") %}
                        <img src="https://www.mlbstatic.com/team-logos/{{ row.get('team_id') }}.svg" alt="{{ row.get('team_name','Team') }} logo" onerror="this.style.display='none'">
                      {% endif %}
                      {{ row.get("team_abbr","TBD") }}
                    </td>
                    <td class="num">{{ row.get("w","") }}</td>
                    <td class="num">{{ row.get("l","") }}</td>
                    <td class="num">{{ '%.3f'|format(row.get("pct",0.0)) }}</td>
                    <td class="num">{{ row.get("gb") if row.get("gb") not in [None, '', '0', '0.0', 0, '-', '‚Äî'] else '‚Äî' }}</td>
                    <td class="num streak-cell">{{ row.get("streak","") }}</td>
                    <td class="num">{{ row.get("last10","") }}</td>
                    <td class="num">{{ row.get("runDiff","") }}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        {% endfor %}
      </section>
    </div>
  </div>

  <p class="footer-note">GB = Games Back. ‚Äú‚Äî‚Äù means tied for first. Last 10 = last ten games. Run Diff = Runs Scored minus Runs Allowed.</p>
</div>

<script>
// same JS as before for run diff coloring and üî•/‚ùÑÔ∏è decoration
</script>
</body>
</html>
