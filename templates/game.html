<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{% if game %}{{ game.away.name }} @ {{ game.home.name }} â€” Game Report{% else %}Game Report{% endif %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <style>
    .game-header {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 16px;
      align-items: center;
      padding: 16px 20px;
      border-bottom: 2px solid #e5e7eb;
      background: #f8f9fb;
    }
    .team { display: grid; justify-items: center; gap: 4px; }
    .team .logo { width: 84px; height: 84px; object-fit: contain; }
    .team .record {
      font-size: 0.95rem;
      font-weight: 500;
      text-align: center;
      margin-top: -4px;
    }
    .team .name { font-size: 1.15rem; font-weight: 700; text-align: center; }
    .team .score { font-size: 2.5rem; font-weight: 800; line-height: 1; }
    .center-info { display: grid; justify-items: center; text-align: center; gap: 6px; padding: 0 10px; }
    .center-info .date { font-size: 0.95rem; color: #374151; }
    .center-info .status { font-size: 1.05rem; font-weight: 600; }
    .center-info .venue { font-size: 0.9rem; color: #6b7280; }
    .placeholder { padding: 16px; color: #6b7280; text-align:center; }
    .boxscore-card {
      margin: 20px auto;
      max-width: 700px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      background: #fff;
      overflow: hidden;
    }
    .boxscore-card table {
      width: 100%;
      border-collapse: collapse;
    }
    .boxscore-card th,
    .boxscore-card td {
      padding: 6px 8px;
      text-align: center;
      border-bottom: 1px solid #e5e7eb;
    }
    .boxscore-card th {
      font-weight: bold;
      background: #f3f4f6;
    }
    .boxscore-card th.rhe {
      font-weight: 700;
    }
  </style>
</head>
<body>

  {% if game %}
  <div class="game-header">
    <!-- Away -->
    <div class="team">
      <img class="logo"
           src="https://www.mlbstatic.com/team-logos/{{ game.away.id }}.svg"
           alt="{{ game.away.name }} logo" />
      <div class="record">{{ game.away.record }}</div>
      <div class="name">{{ game.away.name }}</div>
      <div class="score">{{ game.away.score }}</div>
    </div>

    <!-- Center info -->
    <div class="center-info">
      <div class="date">{{ game.date }}</div>
      <div class="status">{{ game.status }}</div>
      <div class="venue">{{ game.venue }}</div>
    </div>

    <!-- Home -->
    <div class="team">
      <img class="logo"
           src="https://www.mlbstatic.com/team-logos/{{ game.home.id }}.svg"
           alt="{{ game.home.name }} logo" />
      <div class="record">{{ game.home.record }}</div>
      <div class="name">{{ game.home.name }}</div>
      <div class="score">{{ game.home.score }}</div>
    </div>
  </div>

  <!-- Inning-by-inning box score -->
  {% if game.linescore %}
  <div class="boxscore-card">
    <table>
      <thead>
        <tr>
          <th></th>
          {% for i in range(1, game.linescore.n + 1) %}
            <th>{{ i }}</th>
          {% endfor %}
          <th class="rhe">R</th>
          <th class="rhe">H</th>
          <th class="rhe">E</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{ game.away.name }}</td>
          {% for run in game.linescore.away %}
            <td>{{ run }}</td>
          {% endfor %}
          <td class="rhe">{{ game.linescore.totals.away.R }}</td>
          <td class="rhe">{{ game.linescore.totals.away.H }}</td>
          <td class="rhe">{{ game.linescore.totals.away.E }}</td>
        </tr>
        <tr>
          <td>{{ game.home.name }}</td>
          {% for run in game.linescore.home %}
            <td>{{ run }}</td>
          {% endfor %}
          <td class="rhe">{{ game.linescore.totals.home.R }}</td>
          <td class="rhe">{{ game.linescore.totals.home.H }}</td>
          <td class="rhe">{{ game.linescore.totals.home.E }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  {% endif %}

  {% else %}
    <div class="placeholder">Loading game header...</div>
  {% endif %}

</body>
</html>
